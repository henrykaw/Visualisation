<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <title>D3: Linear scale with scatterplot</title>
        <script type="text/javascript" src="d3/d3.js"></script>
        <link rel="stylesheet" type="text/css" href="style.css">
    </head>
    <body>
         <div class="navcontainer">
            <ul class="navbar">
                <li><a href="Index.html">Home</a></li>
                <li><a href="Chap5.html">Chapter 5</a></li>
                <li><a href="Chap6.html">Chapter 6</a></li>
                <li class="active"><a href="chap7.html">Chapter 7</a></li>
                <li><a href="chap8.html">Chapter 8</a></li>
                <li><a href="#">Chapter 9</a></li>
            </ul>
        </div>
        <script type="text/javascript">
            //Heading
            d3.select("body").append("p").text("Scatter plot.");
            //Width and height for canvas
            var w = 500;
            var h = 300;
            
            //Dataset
            var dataset = [
                                [ 5,    20 ],
                                [ 480,  90 ],
                                [ 250,   50 ],
                                [ 100,   33 ],
                                [ 330,   95 ],
                                [ 410,   12 ],
                                [ 475,   44 ],
                                [ 25,    67 ],
                                [ 85,    21 ],
                                [ 220,   88 ],
                                [ 600,  150]
            ];
            //Padding to avoid clipping
            var padding = 20;
            //Scale for X
            var xScale = d3.scale.linear()
                .domain([0, d3.max(dataset, function(d){
                    return d[0];})])
                .range([padding, w - padding * 2]);
            //Scale for Y
            var yScale = d3.scale.linear()
                .domain([0, d3.max(dataset, function(d){
                    return d[1];})])
                .range([h - padding, padding]);
            //Scale for circle radius
            var rScale = d3.scale.linear()
                .domain([0, d3.max(dataset, function(d){ return d[1];})])
                .range([3,7]);
            //Create SVG element
			var svg = d3.select("body")
						.append("svg")
                        .attr({
                            "width": w,
                            "height": h
                        });
            
            svg.selectAll("circle")
			   .data(dataset)
			   .enter()
			   .append("circle")
                .attr({
                "cx": function(d){return xScale(d[0]);},
                "cy": function(d){return yScale(d[1]);},
                "r": function(d){return rScale(d[1])},
                "fill": "teal"
                });
            //Labels for scatter points
            svg.selectAll("text")
                .data(dataset)
                .enter()
                .append("text")
                .text(function (d) {
                    return  d[0] + "," + d[1];
                })
                .attr({
                    "x": function(d) {return xScale(d[0]);},
                    "y": function(d) {return yScale(d[1]);},
                    "class": "shadow" //Link to css
                });
        </script>
    </body>
</html>